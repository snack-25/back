# yaml-language-server: https://www.coderabbit.ai/integrations/schema.v2.json
title: 'Snack25 Code Review'
description: 'Code review guidelines for Nest.js projects'
language: 'ko-KR'
early_access: false
tone_instructions: 'You are an expert code reviewer in Nest.js, TypeScript, JavaScript, PostgreSQL, Prisma and NodeJS. You work in an enterprise software developer team, providing concise and clear code review advice. You only elaborate or provide detailed explanations when requested.'
version: 1

review:
  enabled: true
  auto_review: true
  auto_merge: false
  review_level: strict
  max_lines_per_pr: 300 # PR í¬ê¸° ì œí•œ ì¶”ê°€
  ignore:
    - '**/*.spec.ts'
    - '**/test/**'
    - '**/dist/**'
    - '**/node_modules/**'

rules:
  - name: 'Security Best Practices'
    description: 'NestJS ë³´ì•ˆ ë° ì¸ì¦ ê´€ë ¨ ì½”ë“œ ë¦¬ë·°'
    checks:
      - 'Ensure no hardcoded secrets or credentials'
      - 'Check for proper password hashing (Argon2 ì‚¬ìš© ì—¬ë¶€ í™•ì¸)'
      - 'Verify secure API authentication methods (JWT, OAuth ì ìš© í™•ì¸)'
      - 'Ensure CORS settings are properly configured'
      - 'Check for proper validation with class-validator'
      - 'Verify protection against common web vulnerabilities (XSS, CSRF)'
      - 'Check for proper rate limiting on sensitive endpoints'

  - name: 'Database & Prisma Best Practices'
    description: 'Prisma ë° PostgreSQL ê´€ë ¨ ì½”ë“œ ê²€í† '
    checks:
      - 'Ensure Prisma schema follows best practices (indexing, constraints)'
      - 'Check for efficient database queries (avoid N+1 problems)'
      - 'Verify relation constraints and cascading rules'
      - 'Ensure database migrations are properly documented'
      - 'Check for transaction usage where multiple operations are performed'
      - 'Ensure proper error handling for database operations'

  - name: 'Code Structure & NestJS Best Practices'
    description: 'NestJS í”„ë¡œì íŠ¸ êµ¬ì¡° ë° ëª¨ë²” ì‚¬ë¡€ ê²€í† '
    checks:
      - 'Ensure modules follow a modular and scalable structure'
      - 'Check for proper use of services instead of direct DB calls'
      - 'Verify usage of DTOs for request validation'
      - 'Ensure error handling follows global exception filter patterns'
      - 'Check for proper dependency injection practices'
      - 'Verify use of interfaces for better type safety and abstraction'

  - name: 'Performance Optimization'
    description: 'ë°±ì—”ë“œ ì„±ëŠ¥ ìµœì í™” ë¦¬ë·°'
    checks:
      - 'Ensure API endpoints use pagination where applicable'
      - 'Check for caching strategies on frequently queried data'
      - 'Verify background jobs are used for time-consuming tasks'
      - 'Check for efficient memory usage patterns'
      - 'Verify proper use of async/await patterns'

  - name: 'Testing Best Practices'
    description: 'í…ŒìŠ¤íŠ¸ ì½”ë“œ í’ˆì§ˆ ê²€í† '
    checks:
      - 'Ensure unit tests for core business logic'
      - 'Check for integration tests for API endpoints'
      - 'Verify proper mocking of external dependencies'
      - 'Ensure test coverage meets minimum thresholds (80%+)'
      - 'Check for proper test isolation'

  - name: 'Documentation'
    description: 'API ë° ì½”ë“œ ë¬¸ì„œí™” ê²€í† '
    checks:
      - 'Verify OpenAPI/Swagger annotations for API endpoints'
      - 'Check for meaningful JSDoc comments on complex functions'
      - 'Ensure README and contribution guidelines are up-to-date'
      - 'Verify API versioning is properly documented'

  - name: 'Code Style & Quality'
    description: 'ì½”ë“œ ìŠ¤íƒ€ì¼ ë° í’ˆì§ˆ ê²€í† '
    checks:
      - 'Verify adherence to TypeScript best practices'
      - 'Check for proper error handling and null checks'
      - 'Ensure consistent naming conventions'
      - 'Verify code complexity is kept to a minimum'
      - 'Check for proper use of TypeScript features (types, interfaces, etc.)'

commit_conventions:
  enabled: true
  patterns:
    - "^feat(\\(.+\\))?: .+"
    - "^fix(\\(.+\\))?: .+"
    - "^docs(\\(.+\\))?: .+"
    - "^style(\\(.+\\))?: .+"
    - "^refactor(\\(.+\\))?: .+"
    - "^perf(\\(.+\\))?: .+"
    - "^test(\\(.+\\))?: .+"
    - "^chore(\\(.+\\))?: .+"

notifications:
  enabled: true
  notify_on:
    - 'review_requested'
    - 'auto_review_completed'
    - 'changes_requested'
    - 'approved'
    - 'merged'

github:
  require_reviewers: 1 # ìµœì†Œ 1ëª…ì˜ ë¦¬ë·°ì–´ í•„ìš”
  require_approval: true # ìµœì†Œ 1ëª…ì˜ ë¦¬ë·°ì–´ ìŠ¹ì¸ í•„ìš”
  allow_self_review: false # ìê¸° ìì‹ ì—ê²Œ ë¦¬ë·°ë¥¼ ìš”ì²­í•  ìˆ˜ ì—†ìŒ
  label_approved_prs: 'approved âœ…'
  label_changes_requested: 'changes requested âš ï¸'
  label_work_in_progress: 'WIP ğŸš§'
